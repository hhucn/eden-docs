<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>aggregator.query.db documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Aggregator</span> <span class="project-version">0.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01_getting_started.html"><div class="inner"><span>A1. Getting Started with EDEN</span></div></a></li><li class="depth-1 "><a href="02_using_own_dbas.html"><div class="inner"><span>A2. Using Your Own D-BAS Instance</span></div></a></li><li class="depth-1 "><a href="03_troubleshooting.html"><div class="inner"><span>A3. Troubleshooting</span></div></a></li><li class="depth-1 "><a href="b01_modular_design.html"><div class="inner"><span>B1. Modular Components of EDEN</span></div></a></li><li class="depth-1 "><a href="c01_replacing_modules.html"><div class="inner"><span>C1. Replacing Modules</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregator</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-3"><a href="aggregator.api.routes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>broker</span></div></div></li><li class="depth-3 branch"><a href="aggregator.broker.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="aggregator.broker.connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connector</span></div></a></li><li class="depth-3 branch"><a href="aggregator.broker.publish.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>publish</span></div></a></li><li class="depth-3"><a href="aggregator.broker.subscriber.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>subscriber</span></div></a></li><li class="depth-2 branch"><a href="aggregator.config.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="aggregator.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphql</span></div></div></li><li class="depth-3"><a href="aggregator.graphql.dbas-connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dbas-connector</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>query</span></div></div></li><li class="depth-3 branch"><a href="aggregator.query.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-3 branch current"><a href="aggregator.query.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.retriever.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retriever</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-3"><a href="aggregator.query.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>search</span></div></div></li><li class="depth-3"><a href="aggregator.search.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="aggregator.specs.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-3 branch"><a href="aggregator.utils.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3"><a href="aggregator.utils.pg-listener.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pg-listener</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="aggregator.query.db.html#var-all-links"><div class="inner"><span>all-links</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-all-statements"><div class="inner"><span>all-statements</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-entities-by-uri"><div class="inner"><span>entities-by-uri</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-exact-link"><div class="inner"><span>exact-link</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-exact-statement"><div class="inner"><span>exact-statement</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-get-undercuts"><div class="inner"><span>get-undercuts</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-insert-link"><div class="inner"><span>insert-link</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-insert-statement"><div class="inner"><span>insert-statement</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-links-by-target"><div class="inner"><span>links-by-target</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-links-by-uri"><div class="inner"><span>links-by-uri</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-part-uri"><div class="inner"><span>part-uri</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-random-statements"><div class="inner"><span>random-statements</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-statements-by-author"><div class="inner"><span>statements-by-author</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-statements-by-uri"><div class="inner"><span>statements-by-uri</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-statements-contain"><div class="inner"><span>statements-contain</span></div></a></li><li class="depth-1"><a href="aggregator.query.db.html#var-unpack-elastic"><div class="inner"><span>unpack-elastic</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">aggregator.query.db</h1><div class="doc"><div class="markdown"><p>This module is an API which wraps elastic as a database to be used in EDEN.</p></div></div><div class="public anchor" id="var-all-links"><h3>all-links</h3><div class="usage"><code>(all-links)</code></div><div class="doc"><div class="markdown"><p>Returns all links currently saved in the elasticsearch database.</p></div></div></div><div class="public anchor" id="var-all-statements"><h3>all-statements</h3><div class="usage"><code>(all-statements)</code></div><div class="doc"><div class="markdown"><p>Returns all statements currently saved in the elasticsearch database.</p></div></div></div><div class="public anchor" id="var-entities-by-uri"><h3>entities-by-uri</h3><div class="usage"><code>(entities-by-uri uri entity-type)</code></div><div class="doc"><div class="markdown"><p>Returns all entities matched by the uri.</p></div></div></div><div class="public anchor" id="var-exact-link"><h3>exact-link</h3><div class="usage"><code>(exact-link aggregate-id entity-id version)</code><code>(exact-link from-aggregate from-entity from-version to-aggregate to-entity to-version)</code></div><div class="doc"><div class="markdown"><p>Return the exact link and only that if possible.</p></div></div></div><div class="public anchor" id="var-exact-statement"><h3>exact-statement</h3><div class="usage"><code>(exact-statement aggregate-id entity-id version)</code></div><div class="doc"><div class="markdown"><p>Return the exact statement and only that if possible.</p></div></div></div><div class="public anchor" id="var-get-undercuts"><h3>get-undercuts</h3><div class="usage"><code>(get-undercuts target-aggregator target-entity-id)</code></div><div class="doc"><div class="markdown"><p>Returns all undercuts that point to target aggregator and entity-id.</p></div></div></div><div class="public anchor" id="var-insert-link"><h3>insert-link</h3><div class="usage"><code>(insert-link link)</code></div><div class="doc"><div class="markdown"><p>Requires a map conforming to the ::aggregator.specs/link as input. Inserts the statement into the database.</p></div></div></div><div class="public anchor" id="var-insert-statement"><h3>insert-statement</h3><div class="usage"><code>(insert-statement statement)</code></div><div class="doc"><div class="markdown"><p>Requires a map conforming to the ::aggregator.specs/statement as input. Inserts the statement into the database.</p></div></div></div><div class="public anchor" id="var-links-by-target"><h3>links-by-target</h3><div class="usage"><code>(links-by-target target-aggregator target-entity target-version)</code></div><div class="doc"><div class="markdown"><p>Return all links with the corresponding target.</p></div></div></div><div class="public anchor" id="var-links-by-uri"><h3>links-by-uri</h3><div class="usage"><code>(links-by-uri uri)</code></div><div class="doc"><div class="markdown"><p>Return all link-versions defined by the uri</p></div></div></div><div class="public anchor" id="var-part-uri"><h3>part-uri</h3><div class="usage"><code>(part-uri uri)</code></div><div class="doc"><div class="markdown"><p>A helper function which splits an URI at <code>/</code>. Returns a tuple with the first and second part.</p></div></div></div><div class="public anchor" id="var-random-statements"><h3>random-statements</h3><div class="usage"><code>(random-statements num)</code></div><div class="doc"><div class="markdown"><p>Return <em>num</em> random statements from the db.</p></div></div></div><div class="public anchor" id="var-statements-by-author"><h3>statements-by-author</h3><div class="usage"><code>(statements-by-author author)</code></div><div class="doc"><div class="markdown"><p>Return all statements with a certain author.</p></div></div></div><div class="public anchor" id="var-statements-by-uri"><h3>statements-by-uri</h3><div class="usage"><code>(statements-by-uri uri)</code></div><div class="doc"><div class="markdown"><p>Return all versions of the desired statement or :missing if it can not be found.</p></div></div></div><div class="public anchor" id="var-statements-contain"><h3>statements-contain</h3><div class="usage"><code>(statements-contain query)</code></div><div class="doc"><div class="markdown"><p>Return all statements from the elasticsearch-db where content.content-string containts <code>query</code></p></div></div></div><div class="public anchor" id="var-unpack-elastic"><h3>unpack-elastic</h3><div class="usage"><code>(unpack-elastic response)</code></div><div class="doc"><div class="markdown"><p>Unpack an elasticsearch response to a list of entities.</p></div></div></div></div></body></html>