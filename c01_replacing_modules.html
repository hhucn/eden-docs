<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>C1. Replacing Modules</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Aggregator</span> <span class="project-version">0.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01_getting_started.html"><div class="inner"><span>A1. Getting Started with EDEN</span></div></a></li><li class="depth-1 "><a href="02_using_own_dbas.html"><div class="inner"><span>A2. Using Your Own D-BAS Instance</span></div></a></li><li class="depth-1 "><a href="03_troubleshooting.html"><div class="inner"><span>A3. Troubleshooting</span></div></a></li><li class="depth-1 "><a href="b01_modular_design.html"><div class="inner"><span>B1. Modular Components of EDEN</span></div></a></li><li class="depth-1  current"><a href="c01_replacing_modules.html"><div class="inner"><span>C1. Replacing Modules</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregator</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-3"><a href="aggregator.api.routes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>broker</span></div></div></li><li class="depth-3 branch"><a href="aggregator.broker.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="aggregator.broker.connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connector</span></div></a></li><li class="depth-3 branch"><a href="aggregator.broker.publish.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>publish</span></div></a></li><li class="depth-3"><a href="aggregator.broker.subscriber.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>subscriber</span></div></a></li><li class="depth-2 branch"><a href="aggregator.config.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="aggregator.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphql</span></div></div></li><li class="depth-3"><a href="aggregator.graphql.dbas-connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dbas-connector</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>query</span></div></div></li><li class="depth-3 branch"><a href="aggregator.query.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.retriever.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retriever</span></div></a></li><li class="depth-3 branch"><a href="aggregator.query.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-3"><a href="aggregator.query.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>search</span></div></div></li><li class="depth-3"><a href="aggregator.search.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="aggregator.specs.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-3 branch"><a href="aggregator.utils.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3"><a href="aggregator.utils.pg-listener.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pg-listener</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#c1-replacing-modules" name="c1-replacing-modules"></a>C1. Replacing Modules</h1>
<p>EDEN allows the replacement of the four main modules described in <a href="b01_modular_design.html">“B01. Modular Design”</a>. Following are some guidelines which interfaces need to be adhered to.</p>
<h2><a href="#dgep" name="dgep"></a>DGEP</h2>
<p>D-BAS as the default DGEP can be replaced by any other DGEP as long as the corresponding Clojure modules are modified as well. These are the modules concerned: </p>
<h3><a href="#database-listener" name="database-listener"></a>Database Listener</h3>
<p>If your DGEP maintains its own database which is not the same as the EDEN database, it is recommended to add a listener, which listenes for all changes in said database. Those changes should be mirrored to the EDEN database at all times. The <code>main</code> function in <code>aggregator.core</code> by default starts the listener via the <code>start-listeners</code> method in <code>aggregator.utils.pg-listener</code>. You are called to change the module as you see fit and start your listener in the <code>main</code> function. </p>
<h3><a href="#dgep-api-endpoint" name="dgep-api-endpoint"></a>DGEP API endpoint</h3>
<p>The database listener is a passive connection. It is also recommended to have an active connection to actively pull data from the DGEP. The default module for D-BAS is <code>aggregator.graphql.dbas-connector</code> and utilizes the graphQL API of D-BAS. You should at least implement functions to retrieve all statements and relations and guarantee that both are called in order to initially update EDENs database in the <code>main</code> function. (Currently done by the private <code>bootstrap-dgep-data</code> function)</p>
<h2><a href="#interface" name="interface"></a>Interface</h2>
<p>The Interface does not have to adhere to specific standards as it reads and writes to EDEN at its own leasure. You can use any interface, as long as EDENs data can be consumed by it.</p>
<h2><a href="#database" name="database"></a>Database</h2>
<p>The default database used by EDEN is elasticsearch. You can of course use any other database. In that case you need to replace the <code>aggregator.query.db</code> module with an connector for your database. The functions that need to be present are all public functions of the <a href="aggregator.query.db.html">“default module”</a> excluding <code>part-uri</code> and <code>unpack-elastic</code>. We recommend to use the namespace of <code>aggregator.query.db</code> for your module to minimize bugs. If you wish to change the name you need to update the module imports of the <code>aggregator.query.query</code> module as well. </p>
<h2><a href="#aggregator" name="aggregator"></a>Aggregator</h2>
<p>The modifications of the aggregator can be split into multiple parts, which you also can replace separately. The public methods that need to be present, are all found in the code documentation.</p>
<h3><a href="#the-query-module" name="the-query-module"></a>The Query Module</h3>
<p>The query module is responsible for delivering data that EDEN posesses. Especially the <code>aggregator.query.query</code> module should be made to be an abstraction layer for the database module. </p>
<p><code>aggregator.query.update</code> is the module that concerns itself with updating the database with data that is received by the query module. The <code>update-statement</code> and <code>update-link</code> methods must be present. </p>
<p>All other parts of the <code>aggregator.query</code> module are optional.</p>
<h3><a href="#broker" name="broker"></a>Broker</h3>
<p>The default broker used is RabbitMQ. It should currently not be switched out, as we did not yet develop a safe procedure to guarantee that any other module will work properly with the brokers of foreign instances.</p></div></div></div></body></html>